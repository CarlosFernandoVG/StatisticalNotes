<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 5 Regresión lineal simple | Statistical Notes</title>
  <meta name="description" content="Notas sobre temas relacionados a la estadística" />
  <meta name="generator" content="bookdown 0.21.6 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 5 Regresión lineal simple | Statistical Notes" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Notas sobre temas relacionados a la estadística" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 5 Regresión lineal simple | Statistical Notes" />
  
  <meta name="twitter:description" content="Notas sobre temas relacionados a la estadística" />
  

<meta name="author" content="Carlos Fernando Vásquez Guerra" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="pruebas-de-bondad-y-ajuste.html"/>
<link rel="next" href="regresión-lineal-múltiple.html"/>
<script src="libs/header-attrs-2.7.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<link href="libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Statistical Notes</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prefacio</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#objetivos"><i class="fa fa-check"></i>Objetivos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#estructura"><i class="fa fa-check"></i>Estructura</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#detalles-técnicos"><i class="fa fa-check"></i>Detalles técnicos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#licencia"><i class="fa fa-check"></i>Licencia</a></li>
</ul></li>
<li class="part"><span><b>I Estadística no paramétrica</b></span></li>
<li class="chapter" data-level="1" data-path="pruebas-de-hipótesis.html"><a href="pruebas-de-hipótesis.html"><i class="fa fa-check"></i><b>1</b> Pruebas de hipótesis</a>
<ul>
<li class="chapter" data-level="1.1" data-path="pruebas-de-hipótesis.html"><a href="pruebas-de-hipótesis.html#qué-es-una-prueba-de-hipótesis"><i class="fa fa-check"></i><b>1.1</b> ¿Qué es una Prueba de Hipótesis?</a></li>
<li class="chapter" data-level="1.2" data-path="pruebas-de-hipótesis.html"><a href="pruebas-de-hipótesis.html#dos-tipos-de-hipótesis"><i class="fa fa-check"></i><b>1.2</b> Dos tipos de hipótesis</a></li>
<li class="chapter" data-level="1.3" data-path="pruebas-de-hipótesis.html"><a href="pruebas-de-hipótesis.html#significancia-y-confianza"><i class="fa fa-check"></i><b>1.3</b> Significancia y confianza</a></li>
<li class="chapter" data-level="1.4" data-path="pruebas-de-hipótesis.html"><a href="pruebas-de-hipótesis.html#rechazar-h_0"><i class="fa fa-check"></i><b>1.4</b> Rechazar <span class="math inline">\(H_0\)</span></a></li>
<li class="chapter" data-level="1.5" data-path="pruebas-de-hipótesis.html"><a href="pruebas-de-hipótesis.html#tipos-de-pruebas"><i class="fa fa-check"></i><b>1.5</b> Tipos de pruebas</a></li>
<li class="chapter" data-level="1.6" data-path="pruebas-de-hipótesis.html"><a href="pruebas-de-hipótesis.html#p-value"><i class="fa fa-check"></i><b>1.6</b> <span class="math inline">\(P-value\)</span></a></li>
<li class="chapter" data-level="1.7" data-path="pruebas-de-hipótesis.html"><a href="pruebas-de-hipótesis.html#algunos-puntos-a-recordar"><i class="fa fa-check"></i><b>1.7</b> Algunos puntos a recordar</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="pruebas-binomiales-y-de-rangos.html"><a href="pruebas-binomiales-y-de-rangos.html"><i class="fa fa-check"></i><b>2</b> Pruebas binomiales y de rangos</a></li>
<li class="chapter" data-level="3" data-path="tablas-de-contingencia.html"><a href="tablas-de-contingencia.html"><i class="fa fa-check"></i><b>3</b> Tablas de contingencia</a></li>
<li class="chapter" data-level="4" data-path="pruebas-de-bondad-y-ajuste.html"><a href="pruebas-de-bondad-y-ajuste.html"><i class="fa fa-check"></i><b>4</b> Pruebas de bondad y ajuste</a>
<ul>
<li class="chapter" data-level="4.1" data-path="pruebas-de-bondad-y-ajuste.html"><a href="pruebas-de-bondad-y-ajuste.html#funciones-de-distribución-comunes-y-técnicas-de-identificación"><i class="fa fa-check"></i><b>4.1</b> Funciones de distribución comunes y técnicas de identificación</a></li>
<li class="chapter" data-level="4.2" data-path="pruebas-de-bondad-y-ajuste.html"><a href="pruebas-de-bondad-y-ajuste.html#programación-y-evaluación"><i class="fa fa-check"></i><b>4.2</b> Programación y evaluación</a></li>
<li class="chapter" data-level="4.3" data-path="pruebas-de-bondad-y-ajuste.html"><a href="pruebas-de-bondad-y-ajuste.html#comparación-de-pruebas"><i class="fa fa-check"></i><b>4.3</b> Comparación de pruebas</a></li>
<li class="chapter" data-level="4.4" data-path="pruebas-de-bondad-y-ajuste.html"><a href="pruebas-de-bondad-y-ajuste.html#el-caso-de-la-normal"><i class="fa fa-check"></i><b>4.4</b> El caso de la normal</a></li>
</ul></li>
<li class="part"><span><b>II Regresión lineal</b></span></li>
<li class="chapter" data-level="5" data-path="regresión-lineal-simple.html"><a href="regresión-lineal-simple.html"><i class="fa fa-check"></i><b>5</b> Regresión lineal simple</a>
<ul>
<li class="chapter" data-level="5.1" data-path="regresión-lineal-simple.html"><a href="regresión-lineal-simple.html#correlación-y-linearidad"><i class="fa fa-check"></i><b>5.1</b> Correlación y linearidad</a></li>
<li class="chapter" data-level="5.2" data-path="regresión-lineal-simple.html"><a href="regresión-lineal-simple.html#variables-categóricas"><i class="fa fa-check"></i><b>5.2</b> Variables categóricas</a></li>
<li class="chapter" data-level="5.3" data-path="regresión-lineal-simple.html"><a href="regresión-lineal-simple.html#paquetes-y-funciones-útiles"><i class="fa fa-check"></i><b>5.3</b> Paquetes y funciones útiles</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="regresión-lineal-simple.html"><a href="regresión-lineal-simple.html#correlación"><i class="fa fa-check"></i><b>5.3.1</b> Correlación</a></li>
<li class="chapter" data-level="5.3.2" data-path="regresión-lineal-simple.html"><a href="regresión-lineal-simple.html#regresión"><i class="fa fa-check"></i><b>5.3.2</b> Regresión</a></li>
<li class="chapter" data-level="5.3.3" data-path="regresión-lineal-simple.html"><a href="regresión-lineal-simple.html#tidymodelsbroom"><i class="fa fa-check"></i><b>5.3.3</b> TidyModels::Broom</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="regresión-lineal-simple.html"><a href="regresión-lineal-simple.html#ejemplo"><i class="fa fa-check"></i><b>5.4</b> Ejemplo</a></li>
<li class="chapter" data-level="5.5" data-path="regresión-lineal-simple.html"><a href="regresión-lineal-simple.html#otros-puntos-importantes"><i class="fa fa-check"></i><b>5.5</b> Otros puntos importantes</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="regresión-lineal-múltiple.html"><a href="regresión-lineal-múltiple.html"><i class="fa fa-check"></i><b>6</b> Regresión lineal múltiple</a>
<ul>
<li class="chapter" data-level="6.1" data-path="regresión-lineal-múltiple.html"><a href="regresión-lineal-múltiple.html#pruebas-de-hipótesis-y-anova-e-intervalos"><i class="fa fa-check"></i><b>6.1</b> Pruebas de hipótesis y ANOVA e intervalos</a></li>
<li class="chapter" data-level="6.2" data-path="regresión-lineal-múltiple.html"><a href="regresión-lineal-múltiple.html#interacción-y-selección-de-variables"><i class="fa fa-check"></i><b>6.2</b> Interacción y selección de variables</a></li>
<li class="chapter" data-level="6.3" data-path="regresión-lineal-múltiple.html"><a href="regresión-lineal-múltiple.html#supuestos-y-problemas-potenciales"><i class="fa fa-check"></i><b>6.3</b> Supuestos y problemas potenciales</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="regresión-lineal-múltiple.html"><a href="regresión-lineal-múltiple.html#transformaciones"><i class="fa fa-check"></i><b>6.3.1</b> +Transformaciones</a></li>
<li class="chapter" data-level="6.3.2" data-path="regresión-lineal-múltiple.html"><a href="regresión-lineal-múltiple.html#interpretaciones"><i class="fa fa-check"></i><b>6.3.2</b> Interpretaciones</a></li>
<li class="chapter" data-level="6.3.3" data-path="regresión-lineal-múltiple.html"><a href="regresión-lineal-múltiple.html#validación"><i class="fa fa-check"></i><b>6.3.3</b> Validación</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="regresión-lineal-múltiple.html"><a href="regresión-lineal-múltiple.html#predicción"><i class="fa fa-check"></i><b>6.4</b> Predicción</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="otros-puntos-importantes-de-regresión-lineal.html"><a href="otros-puntos-importantes-de-regresión-lineal.html"><i class="fa fa-check"></i><b>7</b> Otros puntos importantes de regresión lineal</a>
<ul>
<li class="chapter" data-level="7.1" data-path="otros-puntos-importantes-de-regresión-lineal.html"><a href="otros-puntos-importantes-de-regresión-lineal.html#comparación-de-modelos"><i class="fa fa-check"></i><b>7.1</b> Comparación de modelos</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="otros-puntos-importantes-de-regresión-lineal.html"><a href="otros-puntos-importantes-de-regresión-lineal.html#r2"><i class="fa fa-check"></i><b>7.1.1</b> R^2</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="otros-puntos-importantes-de-regresión-lineal.html"><a href="otros-puntos-importantes-de-regresión-lineal.html#análisis-de-valores-influyentes"><i class="fa fa-check"></i><b>7.2</b> Análisis de valores influyentes</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="otros-puntos-importantes-de-regresión-lineal.html"><a href="otros-puntos-importantes-de-regresión-lineal.html#outliers"><i class="fa fa-check"></i><b>7.2.1</b> Outliers</a></li>
<li class="chapter" data-level="7.2.2" data-path="otros-puntos-importantes-de-regresión-lineal.html"><a href="otros-puntos-importantes-de-regresión-lineal.html#valores-con-alto-apalancamiento"><i class="fa fa-check"></i><b>7.2.2</b> Valores con alto “apalancamiento”</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="anova-vs-regresión-lineal.html"><a href="anova-vs-regresión-lineal.html"><i class="fa fa-check"></i><b>8</b> ANOVA vs Regresión lineal</a></li>
<li class="chapter" data-level="9" data-path="librerías-para-eda.html"><a href="librerías-para-eda.html"><i class="fa fa-check"></i><b>9</b> Librerías para EDA</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="_blank">Hecho con bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Statistical Notes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="regresión-lineal-simple" class="section level1" number="5">
<h1><span class="header-section-number">Capítulo 5</span> Regresión lineal simple</h1>
<style type="text/css">
pre {
  max-height: 300px;
  overflow-y: auto;
}

pre[class] {
  max-height: 300px;
}
</style>
<p><strong>NOTA</strong>: Este trabajo es una continuación directa del trabajo <em>Statistical Notes</em> que se puede encontrar en el siguiente <a href="https://rpubs.com/CarlosFVG/734736">enlace</a></p>
<p>Nuestro objetivo en un modelo de regresión será ajustar o asociar una variable, a la que llamaremos variable <strong>respuesta</strong> o <strong>dependediente</strong>, con una o más variables distintas llamadas variables <strong>predictoras</strong> o <strong>independientes</strong>, con el fin de poder predecir valores futuros de la variable respuesta y analizar los efectos que tendría esta variable con alteraciones en el resto de variables del modelo.</p>
<p>En este caso, el de la regresión <strong>lineal simple</strong> consideramos dos variables (1 predictora (<span class="math inline">\(x\)</span>) y otra como respuesta (<span class="math inline">\(y\)</span>)) y establecemos este modelo de la siguiente manera:</p>
<p><span class="math display">\[
y_{i}=\beta_{0}+\beta_{1}x_{i}+\epsilon_{i}
\]</span></p>
<p>Por algunas propiedades interesantes, podemos ver que <span class="math inline">\(\mathbf{E}[y_{i}]=\beta_{0}+\beta_{1}x_{i}\)</span> por lo que este modelo considera que la media de <span class="math inline">\(y\)</span> cambia a razón constante mediante los cambios de <span class="math inline">\(x\)</span>. Como estamos obteniendo una recta, <span class="math inline">\(\beta_{1}\)</span> es la pendiente de dicha recta y es lo que nos indica la importancia de <span class="math inline">\(x\)</span> sobre <span class="math inline">\(y\)</span> (que tan drásticos son los cambios de una sobre otra).</p>
<p><span class="math inline">\(\beta_0\)</span> nos indica el valor de <span class="math inline">\(y\)</span> cuando la variable predictora esta ausente. <span class="math inline">\(\epsilon\)</span> es simplemente un error aleatorio que nos dará ciertos problemas para la validación de este modelo mediante pruebas de hipótesis pero nos otorga la flexibilidad probabilística para la predicción.</p>
<p>Es sencillo realizar una regresión lineal en R, simplemente podemos utilizar el comando <code>base::lm()</code> agregando una fórmula (<code>~</code>) como parámetro. Por ejemplo, consideremos la base de datos <code>datasets::cars</code> donde se tiene la velocidad y la distancia que recorrió un coche para detenerse; estos datos fueron recolectados en 1920.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="regresión-lineal-simple.html#cb31-1" aria-hidden="true" tabindex="-1"></a>cars <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> speed, <span class="at">y =</span> dist)) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Velocidad&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Distancia&quot;</span>) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">&quot;purple3&quot;</span>) <span class="sc">+</span> general_theme</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-35-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Ahora, realizaremos nuestro modelo lineal simple:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="regresión-lineal-simple.html#cb32-1" aria-hidden="true" tabindex="-1"></a>car_regression <span class="ot">&lt;-</span> <span class="fu">lm</span>(dist<span class="sc">~</span>speed, <span class="at">data =</span> cars)</span>
<span id="cb32-2"><a href="regresión-lineal-simple.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(car_regression)</span></code></pre></div>
<pre><code>
Call:
lm(formula = dist ~ speed, data = cars)

Residuals:
    Min      1Q  Median      3Q     Max 
-29.069  -9.525  -2.272   9.215  43.201 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) -17.5791     6.7584  -2.601   0.0123 *  
speed         3.9324     0.4155   9.464 1.49e-12 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 15.38 on 48 degrees of freedom
Multiple R-squared:  0.6511,    Adjusted R-squared:  0.6438 
F-statistic: 89.57 on 1 and 48 DF,  p-value: 1.49e-12</code></pre>
<p>Véase que se nos da mucha información:</p>
<ul>
<li>Estadísticas sobre los residuales.</li>
<li>Información sobre los coeficientes de la regresión mediante mínimos cuadrados.</li>
<li>Información sobre el ajuste del modelo con los datos.</li>
</ul>
<p>Estos puntos se verán después, algunos de ellos se verán hasta regresión lineal múltiple ya que tienen una interpretación similar, pero por el momento basta con saber que, de acuerdo a los datos obtenidos, nuestro modelo queda expresado de la siguiente manera:</p>
<p><span class="math display">\[
y_i = -17.5791 + 3.9324x_i
\]</span></p>
<p>Que es lo mismo al siguiente modelo:</p>
<p><span class="math display">\[
\mbox{Distancia del auto }i = -17.5791 + 3.9324\times\mbox{Velocidad del auto }i
\]</span></p>
<p>Y ahora podemos generar la siguiente gráfica</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="regresión-lineal-simple.html#cb34-1" aria-hidden="true" tabindex="-1"></a>cars <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> speed, <span class="at">y =</span> dist)) <span class="sc">+</span> </span>
<span id="cb34-2"><a href="regresión-lineal-simple.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Velocidad&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Distancia&quot;</span>) <span class="sc">+</span> general_theme <span class="sc">+</span></span>
<span id="cb34-3"><a href="regresión-lineal-simple.html#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">&quot;purple3&quot;</span>) <span class="sc">+</span> </span>
<span id="cb34-4"><a href="regresión-lineal-simple.html#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> car_regression<span class="sc">$</span>coefficients[<span class="dv">1</span>], </span>
<span id="cb34-5"><a href="regresión-lineal-simple.html#cb34-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">slope =</span> car_regression<span class="sc">$</span>coefficients[<span class="dv">2</span>],</span>
<span id="cb34-6"><a href="regresión-lineal-simple.html#cb34-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">colour =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-37-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Hay cosas importantes que ver en este tema y aquí se comenzará con un pequeño análisis de correlación.</p>
<div id="correlación-y-linearidad" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Correlación y linearidad</h2>
<p>La manera más sencilla de proponer un conjunto de variables predictoras es ver la relación lineal que tienen estas con la variable respuesta. Esto lo podemos obtener mediante diferentes estadísticas, por ejemplo:</p>
<ul>
<li>Coeficiente de correlación de pearson: <span class="math inline">\(\rho_{xy} = r_{xy} = \frac{\sum_{i = 1}^n(x_i-\bar{x})(y_i-\bar{y})}{\sqrt{\sum_{i = 1^n}(x_i-\bar{x})^2}\sqrt{\sum_{i = 1}^n(y_i-\bar{y})^2}}\)</span></li>
<li>Coeficiente de correlación de spearman: <span class="math inline">\(r_s = 1- \frac{6\sum d_i^2}{n(n^2-1)}\)</span> donde <span class="math inline">\(d_i = rango(X_i)-rango(Y_i)\)</span></li>
<li>Coeficiente de correlación de Kendall: <span class="math inline">\(\tau = \frac{(\mbox{número de pares concordantes})-(\mbox{número de pares discordantes})}{n \choose 2}\)</span></li>
</ul>
<p>Cada uno de las estadísticas anteriores tiene un propósito diferente, <span class="math inline">\(\rho\)</span> mide la relación lineal entre las variables que se están comparando, el coeficiente de correlación de spearman mide relaciones monótonas (una relación lineal lo es) y el coeficiente de Kendall mide la semejanza en el ordenamiento de los datos cuando se clasifican en rangos por cada una de las cantidades. Todas estas se pueden obtener mediante la función <code>base::cor(x, y, method = c("pearson", "kendall", "spearman"))</code>.</p>
<p>Es importante no sólo considerar el primero de los coeficientes de correlación mencionados, ya que puede existir una clara relación entre las variables (como en un conjunto de puntos que dibujen una parábola) y el coeficiente tener un valor de 0. Vamos a tomar los datos <code>dplyr::starwars</code> donde se tienen datos descriptivos de los personajes de la saga Star Wars.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="regresión-lineal-simple.html#cb35-1" aria-hidden="true" tabindex="-1"></a>starwars</span></code></pre></div>
<pre><code># A tibble: 87 × 14
   name    height  mass hair_color  skin_color eye_color birth_year sex   gender
   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke S…    172    77 blond       fair       blue            19   male  mascu…
 2 C-3PO      167    75 &lt;NA&gt;        gold       yellow         112   none  mascu…
 3 R2-D2       96    32 &lt;NA&gt;        white, bl… red             33   none  mascu…
 4 Darth …    202   136 none        white      yellow          41.9 male  mascu…
 5 Leia O…    150    49 brown       light      brown           19   fema… femin…
 6 Owen L…    178   120 brown, grey light      blue            52   male  mascu…
 7 Beru W…    165    75 brown       light      blue            47   fema… femin…
 8 R5-D4       97    32 &lt;NA&gt;        white, red red             NA   none  mascu…
 9 Biggs …    183    84 black       light      brown           24   male  mascu…
10 Obi-Wa…    182    77 auburn, wh… fair       blue-gray       57   male  mascu…
# … with 77 more rows, and 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
<p>Sólo para estos fines, eliminaremos un outlier sobre el peso y consideraremos sólo esta y la altura para ver si existe algún tipo de relación entre estas variables.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="regresión-lineal-simple.html#cb37-1" aria-hidden="true" tabindex="-1"></a>new_starwars <span class="ot">&lt;-</span> starwars <span class="sc">%&gt;%</span> <span class="fu">filter</span>(mass <span class="sc">&lt;</span> <span class="fu">max</span>(starwars<span class="sc">$</span>mass, <span class="at">na.rm =</span> T))</span>
<span id="cb37-2"><a href="regresión-lineal-simple.html#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="regresión-lineal-simple.html#cb37-3" aria-hidden="true" tabindex="-1"></a>pearson_star <span class="ot">&lt;-</span> <span class="fu">cor</span>(new_starwars<span class="sc">$</span>height, new_starwars<span class="sc">$</span>mass)</span>
<span id="cb37-4"><a href="regresión-lineal-simple.html#cb37-4" aria-hidden="true" tabindex="-1"></a>spearman_star <span class="ot">&lt;-</span> <span class="fu">cor</span>(new_starwars<span class="sc">$</span>height, new_starwars<span class="sc">$</span>mass, <span class="at">method =</span> <span class="st">&quot;spearman&quot;</span>)</span>
<span id="cb37-5"><a href="regresión-lineal-simple.html#cb37-5" aria-hidden="true" tabindex="-1"></a>kendall_star <span class="ot">&lt;-</span> <span class="fu">cor</span>(new_starwars<span class="sc">$</span>height, new_starwars<span class="sc">$</span>mass, <span class="at">method =</span> <span class="st">&quot;kendall&quot;</span>)</span>
<span id="cb37-6"><a href="regresión-lineal-simple.html#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="regresión-lineal-simple.html#cb37-7" aria-hidden="true" tabindex="-1"></a>new_starwars <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> height, <span class="at">y =</span> mass)) <span class="sc">+</span> </span>
<span id="cb37-8"><a href="regresión-lineal-simple.html#cb37-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">&quot;royalblue4&quot;</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Altura (cm)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Peso (kg)&quot;</span>) <span class="sc">+</span></span>
<span id="cb37-9"><a href="regresión-lineal-simple.html#cb37-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="dv">100</span>, <span class="at">y =</span> <span class="dv">150</span>, <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">&quot;Pearson: &quot;</span>, pearson_star, <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)) <span class="sc">+</span></span>
<span id="cb37-10"><a href="regresión-lineal-simple.html#cb37-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="dv">100</span>, <span class="at">y =</span> <span class="dv">140</span>, <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">&quot;Spearman: &quot;</span>, spearman_star, <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)) <span class="sc">+</span></span>
<span id="cb37-11"><a href="regresión-lineal-simple.html#cb37-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="dv">100</span>, <span class="at">y =</span> <span class="dv">130</span>, <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">&quot;Kendall: &quot;</span>, kendall_star, <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)) <span class="sc">+</span></span>
<span id="cb37-12"><a href="regresión-lineal-simple.html#cb37-12" aria-hidden="true" tabindex="-1"></a>  general_theme</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-39-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Como vemos, el coeficiente de correlación de pearson tiene un valor cercano al de Spearman, aunque este último nos inidica que existe una relación monótona, por lo que podríamos aplicar una transformación para otorgar un comportamiento más cercano al lineal con una función monóntona como lo es el logaritmo.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="regresión-lineal-simple.html#cb38-1" aria-hidden="true" tabindex="-1"></a>pearson_star <span class="ot">&lt;-</span> <span class="fu">cor</span>(new_starwars<span class="sc">$</span>height, <span class="fu">log</span>(new_starwars<span class="sc">$</span>mass))</span>
<span id="cb38-2"><a href="regresión-lineal-simple.html#cb38-2" aria-hidden="true" tabindex="-1"></a>spearman_star <span class="ot">&lt;-</span> <span class="fu">cor</span>(new_starwars<span class="sc">$</span>height, <span class="fu">log</span>(new_starwars<span class="sc">$</span>mass), <span class="at">method =</span> <span class="st">&quot;spearman&quot;</span>)</span>
<span id="cb38-3"><a href="regresión-lineal-simple.html#cb38-3" aria-hidden="true" tabindex="-1"></a>kendall_star <span class="ot">&lt;-</span> <span class="fu">cor</span>(new_starwars<span class="sc">$</span>height, <span class="fu">log</span>(new_starwars<span class="sc">$</span>mass), <span class="at">method =</span> <span class="st">&quot;kendall&quot;</span>)</span>
<span id="cb38-4"><a href="regresión-lineal-simple.html#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="regresión-lineal-simple.html#cb38-5" aria-hidden="true" tabindex="-1"></a>new_starwars <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> height, <span class="at">y =</span> <span class="fu">log</span>(mass))) <span class="sc">+</span> </span>
<span id="cb38-6"><a href="regresión-lineal-simple.html#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">&quot;royalblue4&quot;</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Altura (cm)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Peso (kg)&quot;</span>) <span class="sc">+</span></span>
<span id="cb38-7"><a href="regresión-lineal-simple.html#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="dv">100</span>, <span class="at">y =</span> <span class="fl">4.8</span>, <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">&quot;Pearson: &quot;</span>, pearson_star, <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)) <span class="sc">+</span></span>
<span id="cb38-8"><a href="regresión-lineal-simple.html#cb38-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="dv">100</span>, <span class="at">y =</span> <span class="fl">4.6</span>, <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">&quot;Spearman: &quot;</span>, spearman_star, <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)) <span class="sc">+</span></span>
<span id="cb38-9"><a href="regresión-lineal-simple.html#cb38-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="dv">100</span>, <span class="at">y =</span> <span class="fl">4.4</span>, <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">&quot;Kendall: &quot;</span>, kendall_star, <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)) <span class="sc">+</span></span>
<span id="cb38-10"><a href="regresión-lineal-simple.html#cb38-10" aria-hidden="true" tabindex="-1"></a>  general_theme</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-40-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Nuestro coeficiente de correlación lineal aumente significativamente y surge la siguiente pregunta: ¿Cuándo utilizar alguna transformación y cuál? En general, cualquier función que sólo cambie la escala y este definida para los datos que se estén considerando se puede utilizar, como un logaritmo (que nos ayuda a reducir dispersión y dar valores pequeños), una raíz cuadrada, una función inversa, etc; aunque hay que tener cuidado. Por ejemplo ¿Qué pasaría con si tengo valores iguales a cero y aplico un logaritmo? ¿La interpretación sobre los coeficientes cambiaría o no? Este último punto se verá después.</p>
<ul>
<li>Se recomienda revisar el libro The Statistical Sleuth, tercera edición donde se muestran algunos patrones comunes que podrían impedir realizar alguna relación lineal entre variables.</li>
</ul>
<p>Ahora, si bien es razonable pensar que la altura y el peso estén relacionados de manera lineal ¿Podemos confiar siempre en el resultado de una correlación? No, ya que una correlación no implica causalidad (una relación verdadera entre dos variables). Veamos los siguientes ejemplos del siguiente <a href="https://www.tylervigen.com/spurious-correlations">enlace</a>:</p>
<!-- ![](cor1.png) -->
<center>
<img src="cor1.png" alt="drawing" width="750"/>
</center>
<!-- ![](cor2.png) -->
<center>
<img src="cor2.png" alt="drawing" width="750"/>
</center>
<p>Es difícil pensar que realmente existe una relación entre dichas variables en cada caso, así como considerar que existe una relación entre <a href="https://hbr.org/2015/06/beware-spurious-correlations">la cantidad de IPhones comprados y la cantidad de personas que mueren al caer de las escaleras</a> o pensar que <a href="https://priceonomics.com/do-storks-deliver-babies/">la cantidad de cigueñas esta relacionado con la cantidad de nacimientos en Europa</a> aunque se tenga un <span class="math inline">\(r = 0.62\)</span> y un <span class="math inline">\(p-value = 0.008\)</span> en la prueba de hipótesis correspondiente a <span class="math inline">\(\beta_i\)</span>.</p>
<p>Otro punto interesante es, ¿Qué tanto podemos confiar sólo en nuestras estadísticas? Consideremos la siguiente información obtenida del paquete <code>datasauRus</code>.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="regresión-lineal-simple.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(datasauRus)</span>
<span id="cb39-2"><a href="regresión-lineal-simple.html#cb39-2" aria-hidden="true" tabindex="-1"></a>dino_data <span class="ot">&lt;-</span> datasauRus<span class="sc">::</span>datasaurus_dozen <span class="sc">%&gt;%</span> <span class="fu">filter</span>(dataset <span class="sc">==</span> <span class="st">&quot;dino&quot;</span>)</span>
<span id="cb39-3"><a href="regresión-lineal-simple.html#cb39-3" aria-hidden="true" tabindex="-1"></a>  datasaurus_dozen <span class="sc">%&gt;%</span> </span>
<span id="cb39-4"><a href="regresión-lineal-simple.html#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(dataset) <span class="sc">%&gt;%</span> </span>
<span id="cb39-5"><a href="regresión-lineal-simple.html#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(</span>
<span id="cb39-6"><a href="regresión-lineal-simple.html#cb39-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">mean_x    =</span> <span class="fu">mean</span>(x),</span>
<span id="cb39-7"><a href="regresión-lineal-simple.html#cb39-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">mean_y    =</span> <span class="fu">mean</span>(y),</span>
<span id="cb39-8"><a href="regresión-lineal-simple.html#cb39-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">std_dev_x =</span> <span class="fu">sd</span>(x),</span>
<span id="cb39-9"><a href="regresión-lineal-simple.html#cb39-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">std_dev_y =</span> <span class="fu">sd</span>(y),</span>
<span id="cb39-10"><a href="regresión-lineal-simple.html#cb39-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">corr_x_y  =</span> <span class="fu">cor</span>(x, y)</span>
<span id="cb39-11"><a href="regresión-lineal-simple.html#cb39-11" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<pre><code># A tibble: 13 × 6
   dataset    mean_x mean_y std_dev_x std_dev_y corr_x_y
   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1 away         54.3   47.8      16.8      26.9  -0.0641
 2 bullseye     54.3   47.8      16.8      26.9  -0.0686
 3 circle       54.3   47.8      16.8      26.9  -0.0683
 4 dino         54.3   47.8      16.8      26.9  -0.0645
 5 dots         54.3   47.8      16.8      26.9  -0.0603
 6 h_lines      54.3   47.8      16.8      26.9  -0.0617
 7 high_lines   54.3   47.8      16.8      26.9  -0.0685
 8 slant_down   54.3   47.8      16.8      26.9  -0.0690
 9 slant_up     54.3   47.8      16.8      26.9  -0.0686
10 star         54.3   47.8      16.8      26.9  -0.0630
11 v_lines      54.3   47.8      16.8      26.9  -0.0694
12 wide_lines   54.3   47.8      16.8      26.9  -0.0666
13 x_shape      54.3   47.8      16.8      26.9  -0.0656</code></pre>
<p>Como vemos, las estadísticas son bastante similares entre todos los conjuntos de datos, incluso la correlación; por lo que tal vez pensaríamos en tener datos similares; bueno veámos como se ven algunos de estos datos.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="regresión-lineal-simple.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datasaurus_dozen <span class="sc">%&gt;%</span> <span class="fu">filter</span>(dataset <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;dino&quot;</span>, <span class="st">&quot;star&quot;</span>, <span class="st">&quot;h_lines&quot;</span>)), <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>y, <span class="at">colour=</span>dataset))<span class="sc">+</span></span>
<span id="cb41-2"><a href="regresión-lineal-simple.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb41-3"><a href="regresión-lineal-simple.html#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()<span class="sc">+</span></span>
<span id="cb41-4"><a href="regresión-lineal-simple.html#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)<span class="sc">+</span></span>
<span id="cb41-5"><a href="regresión-lineal-simple.html#cb41-5" aria-hidden="true" tabindex="-1"></a>  general_theme<span class="sc">+</span></span>
<span id="cb41-6"><a href="regresión-lineal-simple.html#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>dataset, <span class="at">ncol=</span><span class="dv">3</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-42-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Aquí se dejan algunos enlaces sobre estos ejemplos en particular:</p>
<ul>
<li><a href="https://cran.r-project.org/web/packages/datasauRus/vignettes/Datasaurus.html">The Datasaurus data package</a></li>
<li><a href="http://www.thefunctionalart.com/2016/08/download-datasaurus-never-trust-summary.html">Download the Datasaurus: Never trust summary statistics alone; always visualize your data</a></li>
<li><a href="https://damassets.autodesk.net/content/dam/autodesk/www/autodesk-reasearch/Publications/pdf/same-stats-different-graphs.pdf">Same Stats, Different Graphs</a></li>
<li><a href="https://rpodcast.shinyapps.io/shinysaurus/_w_2bd1dff9/">ShinySaurus</a></li>
</ul>
<p>Y algunos con temas relacionados a la correlación:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Correlation">Correlation</a></li>
<li><a href="https://en.wikipedia.org/wiki/Pearson_correlation_coefficient">Pearson correlation coefficient</a></li>
<li><a href="https://es.wikipedia.org/wiki/Coeficiente_de_correlación_de_rango_de_Kendall">Coeficiente de correlación de rango de Kendall</a></li>
<li><a href="https://economipedia.com/definiciones/tau-de-kendall-i.html">Tau de Kendall</a></li>
<li><a href="https://en.wikipedia.org/wiki/Spearman%27s_rank_correlation_coefficient">Spearman’s rank correlation coefficient</a></li>
<li><a href="https://en.wikipedia.org/wiki/Coefficient_of_colligation">Coefficient of colligation</a>
<a href="https://m-clark.github.io/docs/CorrelationComparison.pdf">A comparison of correlation measures</a></li>
</ul>
</div>
<div id="variables-categóricas" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Variables categóricas</h2>
<p>Se puede trabajar con variables categóricas en un modelo de regresión para determinar la importante que tiene una cierta segregación en nuestra variable a modelar. Si bien se podría remplazar todos los valores categóricos por valores numéricos, esto nos ayudaría sólo con valores ordinales. Otra técnica común es la creación de variables <a href="https://en.wikipedia.org/wiki/Dummy_variable_(statistics)"><em>dummys</em></a> a lo cual se le conoce como <a href="https://machinelearningmastery.com/why-one-hot-encode-data-in-machine-learning/">One-Hot-Encoding</a>.</p>
<p>Para esta sección se utilizarán algunas variables de los tabulados de la encuesta <a href="https://www.inegi.org.mx/programas/enigh/nc/2018/#Microdatos">Encuesta Nacional de Ingresos y Gastos de los Hogares (ENIGH). 2018 Nueva serie</a>, específicamente para el estado de Aguascalientes. Nos interesan ciertas variables que se puedan relacionar con el ingreso corriente de los hogares de dicha región y en esta sección nos interesa determinar la importancia del sexo de los jefes del hogar.</p>
<pre><code># A tibble: 2,306 × 15
   edad_jefe sexo_jefe tot_integ percep_ing ing_cor alimentos vestido calzado
       &lt;dbl&gt; &lt;fct&gt;         &lt;dbl&gt;      &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1        74 Hombre            3          3  76404.     5618.     0        0 
 2        48 Hombre            5          5  42988.    20930.   225.     176.
 3        39 Hombre            2          2 580698.    37594.  2015.       0 
 4        70 Mujer             2          2  46253.     2893.    97.8      0 
 5        51 Mujer             4          2  53837.     7367.     0        0 
 6        41 Mujer             4          2 237743.        0      0        0 
 7        57 Mujer             1          1  32607.    11456.     0        0 
 8        53 Hombre            2          2 169918.    30986.   293.    1272.
 9        30 Hombre            3          2  17311.     5773.   533.       0 
10        69 Hombre            4          4 120488.     3986.  1174.       0 
# … with 2,296 more rows, and 7 more variables: vivienda &lt;dbl&gt;, limpieza &lt;dbl&gt;,
#   salud &lt;dbl&gt;, transporte &lt;dbl&gt;, personales &lt;dbl&gt;, educacion &lt;dbl&gt;,
#   esparcimiento &lt;dbl&gt;</code></pre>
<p>Vamos a aplicar una regresión lineal entre el ingreso corriente y el sexo del jefe de familia para ver como se comporta la función <code>lm()</code>.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="regresión-lineal-simple.html#cb43-1" aria-hidden="true" tabindex="-1"></a>data_income_sexo  <span class="sc">%&gt;%</span> <span class="fu">lm</span>(ing_cor<span class="sc">~</span>sexo_jefe, .) <span class="sc">%&gt;%</span> <span class="fu">tidy</span>()</span></code></pre></div>
<pre><code># A tibble: 2 × 5
  term           estimate std.error statistic   p.value
  &lt;chr&gt;             &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)      60072.     1672.     35.9  7.55e-225
2 sexo_jefeMujer   -9823.     3348.     -2.93 3.38e-  3</code></pre>
<p>Al parecer trabaja bien dicha función con datos categóricos. Lo que sucedio es que tal función realizo una codificación sobre el factor <code>sexo_jefe</code>, de hecho aplico esta configuración</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="regresión-lineal-simple.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">contrasts</span>(data_income_sexo<span class="sc">$</span>sexo_jefe)</span></code></pre></div>
<pre><code>       Mujer
Hombre     0
Mujer      1</code></pre>
<p>Es decir, la variable dummy que se esta considerando en el modelo tiene la siguiente codificación:</p>
<ul>
<li>1 si una persona es mujer</li>
<li>0 si una persona es hombre</li>
</ul>
<p>Lo que otorgaría una ponderación sobre las variables del modelo cuando estos son diferentes de cero:</p>
<ul>
<li><span class="math inline">\(\beta_0 + \beta_1\)</span> si una persona es mujer.</li>
<li><span class="math inline">\(\beta_0\)</span> si una persona es hombre.</li>
</ul>
<p>Estos pueden ser interpretados de la siguiente manera:</p>
<p><span class="math inline">\(\beta_0 = 60071.50\)</span> es el promedio del ingreso entre los hombres.
<span class="math inline">\(\beta_0 + \beta_1 = 60071.50 - 9822.53 = 50248.97\)</span> es el promedio del ingreso entre las mujeres
<span class="math inline">\(beta_1 = -9822.53\)</span> es el la diferencia promedio en el ingreso entre los hombres y mujeres</p>
<p>El coeficiente negativo para las mujeres en la regresión sólo indica que la categoría “mujer” está asociado con una disminución en el salario (en relación con los hombres).</p>
<p>Si cambiamos la configuración de la variable dummy, la interpretación y los valores “se conservan”</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="regresión-lineal-simple.html#cb47-1" aria-hidden="true" tabindex="-1"></a>di_nc <span class="ot">&lt;-</span> data_income_sexo <span class="sc">%&gt;%</span></span>
<span id="cb47-2"><a href="regresión-lineal-simple.html#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sexo_jefe =</span> <span class="fu">relevel</span>(sexo_jefe, <span class="at">ref =</span> <span class="st">&quot;Mujer&quot;</span>))</span>
<span id="cb47-3"><a href="regresión-lineal-simple.html#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="fu">contrasts</span>(di_nc<span class="sc">$</span>sexo_jefe)</span></code></pre></div>
<pre><code>       Hombre
Mujer       0
Hombre      1</code></pre>
<p>Véase que el ingreso promedio entre las mujeres sigue siendo 50248.97 y la diferencia promedio en el ingreso entre los hombres y mujeres sigue siendo de 9822.53 pesos, aunque al tomar a los hombres como el factor con valor 1, indica un aumento en la variable respuesta.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="regresión-lineal-simple.html#cb49-1" aria-hidden="true" tabindex="-1"></a>di_nc <span class="sc">%&gt;%</span> <span class="fu">lm</span>(ing_cor<span class="sc">~</span>sexo_jefe, .) <span class="sc">%&gt;%</span> <span class="fu">tidy</span>()</span></code></pre></div>
<pre><code># A tibble: 2 × 5
  term            estimate std.error statistic  p.value
  &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)       50249.     2901.     17.3  2.78e-63
2 sexo_jefeHombre    9823.     3348.      2.93 3.38e- 3</code></pre>
<ul>
<li><a href="https://bookdown.org/carillitony/bailey/chp6.html">R Companion to Real Econometrics: Chapter 7 Dummy Variables: Smarter than You Think</a></li>
</ul>
</div>
<div id="paquetes-y-funciones-útiles" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Paquetes y funciones útiles</h2>
<div id="correlación" class="section level3" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Correlación</h3>
<p>Al utilizar la función <code>cor()</code> con un conjunto de datos numéricos obtenemos una matriz de correlaciones entre las distintas variables; esta representación no es la mejor ayuda visual para identificar correlaciones fuertes, por lo que podemos utilizar un correlograma con dicha matriz. Vamos a tomar los datos de gasto-ingreso vistos anteriormente poniendo especial atención sobre el ingreso corriente de los hogares de dicha región.</p>
<p>Aquí se ve una aplicación de la función <code>corrplot::corrplot()</code></p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="regresión-lineal-simple.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrplot)</span>
<span id="cb51-2"><a href="regresión-lineal-simple.html#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">corrplot</span>(<span class="fu">cor</span>(data_income), <span class="at">type =</span> <span class="st">&quot;lower&quot;</span>, <span class="at">diag =</span> F)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-49-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Tenemos otras alternativas que nos permiten tener un comportamiento similar al paquete ggplot, como lo es la función <code>ggcorrplot::ggcorrplot()</code>.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="regresión-lineal-simple.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggcorrplot)</span>
<span id="cb52-2"><a href="regresión-lineal-simple.html#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcorrplot</span>(<span class="fu">cor</span>(data_income), </span>
<span id="cb52-3"><a href="regresión-lineal-simple.html#cb52-3" aria-hidden="true" tabindex="-1"></a>           <span class="co">#method = &quot;circle&quot;  #Método de visualización, &quot;square&quot; por default.</span></span>
<span id="cb52-4"><a href="regresión-lineal-simple.html#cb52-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">hc.order =</span> <span class="cn">TRUE</span>, <span class="co">#Orden jerárquico sobre los valores obtenidos.</span></span>
<span id="cb52-5"><a href="regresión-lineal-simple.html#cb52-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">outline.col =</span> <span class="st">&quot;white&quot;</span>, <span class="co">#Color del margen de los cuadrádos o círculos.</span></span>
<span id="cb52-6"><a href="regresión-lineal-simple.html#cb52-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">type =</span> <span class="st">&quot;lower&quot;</span> <span class="co">#Elementos a desplegar en la gráfica</span></span>
<span id="cb52-7"><a href="regresión-lineal-simple.html#cb52-7" aria-hidden="true" tabindex="-1"></a>           <span class="co">#lab = TRUE # Anotaciones de los valores obtenidos en cada celda de la matriz.</span></span>
<span id="cb52-8"><a href="regresión-lineal-simple.html#cb52-8" aria-hidden="true" tabindex="-1"></a>           <span class="co">#colors = c(&quot;green&quot;, &quot;black&quot;, &quot;red&quot;) #Colores </span></span>
<span id="cb52-9"><a href="regresión-lineal-simple.html#cb52-9" aria-hidden="true" tabindex="-1"></a>           )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-50-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Además de un correlograma, podemos obtener las correlaciones más importantes en otro tipo de gráfico, esto es lo que hace el paquete <code>lares</code> con las funciones <code>corr_cross()</code> y <code>corr_var()</code>. Para más información se sugiere revisar el siguiente <a href="https://datascienceplus.com/find-insights-with-ranked-cross-correlations/">post</a></p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="regresión-lineal-simple.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lares)</span>
<span id="cb53-2"><a href="regresión-lineal-simple.html#cb53-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-3"><a href="regresión-lineal-simple.html#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="fu">corr_cross</span>(data_income,</span>
<span id="cb53-4"><a href="regresión-lineal-simple.html#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_pvalue =</span> <span class="fl">0.05</span>,  <span class="co"># Correlaciones significantes a mostrar (a un nivel del 5%)</span></span>
<span id="cb53-5"><a href="regresión-lineal-simple.html#cb53-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">top =</span> <span class="dv">10</span>            <span class="co"># Cantidad de variables a mostrar con mayor significancia</span></span>
<span id="cb53-6"><a href="regresión-lineal-simple.html#cb53-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb53-7"><a href="regresión-lineal-simple.html#cb53-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-8"><a href="regresión-lineal-simple.html#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="fu">corr_var</span>(data_income,         </span>
<span id="cb53-9"><a href="regresión-lineal-simple.html#cb53-9" aria-hidden="true" tabindex="-1"></a>  ing_cor,                    <span class="co"># Nombre de la variable a comparar</span></span>
<span id="cb53-10"><a href="regresión-lineal-simple.html#cb53-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">top =</span> <span class="dv">5</span>                  <span class="co"># Cantidad de variables a mostrar con mayor significancia</span></span>
<span id="cb53-11"><a href="regresión-lineal-simple.html#cb53-11" aria-hidden="true" tabindex="-1"></a>) </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-51-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Igual podríamos elegir una visualización más tradicional pero con un formato más elegante, como el proporcionado con la función <code>modelsummary::datasummary_correlation()</code></p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="regresión-lineal-simple.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modelsummary)</span>
<span id="cb54-2"><a href="regresión-lineal-simple.html#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">datasummary_correlation</span>(data_income, </span>
<span id="cb54-3"><a href="regresión-lineal-simple.html#cb54-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">method =</span> <span class="st">&quot;pearspear&quot;</span> <span class="co"># &quot;pearson&quot;, &quot;kendall&quot;, &quot;spearman&quot;, or &quot;pearspear&quot; (Pearson correlations above and Spearman correlations below the diagonal)</span></span>
<span id="cb54-4"><a href="regresión-lineal-simple.html#cb54-4" aria-hidden="true" tabindex="-1"></a>                        ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-5"><a href="regresión-lineal-simple.html#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="st">&quot;striped&quot;</span>, <span class="at">full_width =</span> F) <span class="sc">%&gt;%</span></span>
<span id="cb54-6"><a href="regresión-lineal-simple.html#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scroll_box</span>(<span class="at">width =</span> <span class="st">&quot;100%&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
edad_jefe
</th>
<th style="text-align:right;">
tot_integ
</th>
<th style="text-align:right;">
percep_ing
</th>
<th style="text-align:right;">
ing_cor
</th>
<th style="text-align:right;">
alimentos
</th>
<th style="text-align:right;">
vestido
</th>
<th style="text-align:right;">
calzado
</th>
<th style="text-align:right;">
vivienda
</th>
<th style="text-align:right;">
limpieza
</th>
<th style="text-align:right;">
salud
</th>
<th style="text-align:right;">
transporte
</th>
<th style="text-align:right;">
personales
</th>
<th style="text-align:right;">
educacion
</th>
<th style="text-align:right;">
esparcimiento
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
edad_jefe
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-.10
</td>
<td style="text-align:right;">
.09
</td>
<td style="text-align:right;">
.02
</td>
<td style="text-align:right;">
-.10
</td>
<td style="text-align:right;">
-.10
</td>
<td style="text-align:right;">
-.14
</td>
<td style="text-align:right;">
-.05
</td>
<td style="text-align:right;">
-.03
</td>
<td style="text-align:right;">
.08
</td>
<td style="text-align:right;">
-.02
</td>
<td style="text-align:right;">
-.02
</td>
<td style="text-align:right;">
-.09
</td>
<td style="text-align:right;">
-.09
</td>
</tr>
<tr>
<td style="text-align:left;">
tot_integ
</td>
<td style="text-align:right;">
-.14
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
.67
</td>
<td style="text-align:right;">
.12
</td>
<td style="text-align:right;">
.24
</td>
<td style="text-align:right;">
.10
</td>
<td style="text-align:right;">
.22
</td>
<td style="text-align:right;">
.00
</td>
<td style="text-align:right;">
.03
</td>
<td style="text-align:right;">
-.02
</td>
<td style="text-align:right;">
.08
</td>
<td style="text-align:right;">
.13
</td>
<td style="text-align:right;">
.18
</td>
<td style="text-align:right;">
-.02
</td>
</tr>
<tr>
<td style="text-align:left;">
percep_ing
</td>
<td style="text-align:right;">
.11
</td>
<td style="text-align:right;">
.61
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
.18
</td>
<td style="text-align:right;">
.23
</td>
<td style="text-align:right;">
.13
</td>
<td style="text-align:right;">
.18
</td>
<td style="text-align:right;">
.02
</td>
<td style="text-align:right;">
.06
</td>
<td style="text-align:right;">
.00
</td>
<td style="text-align:right;">
.10
</td>
<td style="text-align:right;">
.13
</td>
<td style="text-align:right;">
.15
</td>
<td style="text-align:right;">
.05
</td>
</tr>
<tr>
<td style="text-align:left;">
ing_cor
</td>
<td style="text-align:right;">
.01
</td>
<td style="text-align:right;">
.30
</td>
<td style="text-align:right;">
.40
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
.37
</td>
<td style="text-align:right;">
.42
</td>
<td style="text-align:right;">
.28
</td>
<td style="text-align:right;">
.18
</td>
<td style="text-align:right;">
.41
</td>
<td style="text-align:right;">
.13
</td>
<td style="text-align:right;">
.28
</td>
<td style="text-align:right;">
.33
</td>
<td style="text-align:right;">
.22
</td>
<td style="text-align:right;">
.37
</td>
</tr>
<tr>
<td style="text-align:left;">
alimentos
</td>
<td style="text-align:right;">
-.14
</td>
<td style="text-align:right;">
.32
</td>
<td style="text-align:right;">
.27
</td>
<td style="text-align:right;">
.52
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
.30
</td>
<td style="text-align:right;">
.32
</td>
<td style="text-align:right;">
.23
</td>
<td style="text-align:right;">
.40
</td>
<td style="text-align:right;">
.10
</td>
<td style="text-align:right;">
.34
</td>
<td style="text-align:right;">
.34
</td>
<td style="text-align:right;">
.28
</td>
<td style="text-align:right;">
.35
</td>
</tr>
<tr>
<td style="text-align:left;">
vestido
</td>
<td style="text-align:right;">
-.18
</td>
<td style="text-align:right;">
.18
</td>
<td style="text-align:right;">
.21
</td>
<td style="text-align:right;">
.38
</td>
<td style="text-align:right;">
.37
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
.60
</td>
<td style="text-align:right;">
.14
</td>
<td style="text-align:right;">
.37
</td>
<td style="text-align:right;">
.10
</td>
<td style="text-align:right;">
.24
</td>
<td style="text-align:right;">
.35
</td>
<td style="text-align:right;">
.26
</td>
<td style="text-align:right;">
.34
</td>
</tr>
<tr>
<td style="text-align:left;">
calzado
</td>
<td style="text-align:right;">
-.22
</td>
<td style="text-align:right;">
.31
</td>
<td style="text-align:right;">
.23
</td>
<td style="text-align:right;">
.30
</td>
<td style="text-align:right;">
.34
</td>
<td style="text-align:right;">
.54
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
.11
</td>
<td style="text-align:right;">
.30
</td>
<td style="text-align:right;">
.09
</td>
<td style="text-align:right;">
.22
</td>
<td style="text-align:right;">
.29
</td>
<td style="text-align:right;">
.30
</td>
<td style="text-align:right;">
.29
</td>
</tr>
<tr>
<td style="text-align:left;">
vivienda
</td>
<td style="text-align:right;">
-.02
</td>
<td style="text-align:right;">
.11
</td>
<td style="text-align:right;">
.12
</td>
<td style="text-align:right;">
.25
</td>
<td style="text-align:right;">
.23
</td>
<td style="text-align:right;">
.14
</td>
<td style="text-align:right;">
.08
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
.23
</td>
<td style="text-align:right;">
.11
</td>
<td style="text-align:right;">
.15
</td>
<td style="text-align:right;">
.17
</td>
<td style="text-align:right;">
.15
</td>
<td style="text-align:right;">
.21
</td>
</tr>
<tr>
<td style="text-align:left;">
limpieza
</td>
<td style="text-align:right;">
-.10
</td>
<td style="text-align:right;">
.19
</td>
<td style="text-align:right;">
.19
</td>
<td style="text-align:right;">
.48
</td>
<td style="text-align:right;">
.46
</td>
<td style="text-align:right;">
.38
</td>
<td style="text-align:right;">
.32
</td>
<td style="text-align:right;">
.23
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
.10
</td>
<td style="text-align:right;">
.39
</td>
<td style="text-align:right;">
.38
</td>
<td style="text-align:right;">
.31
</td>
<td style="text-align:right;">
.40
</td>
</tr>
<tr>
<td style="text-align:left;">
salud
</td>
<td style="text-align:right;">
-.01
</td>
<td style="text-align:right;">
.09
</td>
<td style="text-align:right;">
.14
</td>
<td style="text-align:right;">
.29
</td>
<td style="text-align:right;">
.28
</td>
<td style="text-align:right;">
.25
</td>
<td style="text-align:right;">
.20
</td>
<td style="text-align:right;">
.12
</td>
<td style="text-align:right;">
.28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
.07
</td>
<td style="text-align:right;">
.12
</td>
<td style="text-align:right;">
.07
</td>
<td style="text-align:right;">
.05
</td>
</tr>
<tr>
<td style="text-align:left;">
transporte
</td>
<td style="text-align:right;">
-.08
</td>
<td style="text-align:right;">
.20
</td>
<td style="text-align:right;">
.23
</td>
<td style="text-align:right;">
.62
</td>
<td style="text-align:right;">
.47
</td>
<td style="text-align:right;">
.31
</td>
<td style="text-align:right;">
.27
</td>
<td style="text-align:right;">
.24
</td>
<td style="text-align:right;">
.44
</td>
<td style="text-align:right;">
.26
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
.31
</td>
<td style="text-align:right;">
.17
</td>
<td style="text-align:right;">
.28
</td>
</tr>
<tr>
<td style="text-align:left;">
personales
</td>
<td style="text-align:right;">
-.16
</td>
<td style="text-align:right;">
.34
</td>
<td style="text-align:right;">
.26
</td>
<td style="text-align:right;">
.52
</td>
<td style="text-align:right;">
.50
</td>
<td style="text-align:right;">
.45
</td>
<td style="text-align:right;">
.40
</td>
<td style="text-align:right;">
.26
</td>
<td style="text-align:right;">
.58
</td>
<td style="text-align:right;">
.30
</td>
<td style="text-align:right;">
.47
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
.22
</td>
<td style="text-align:right;">
.30
</td>
</tr>
<tr>
<td style="text-align:left;">
educacion
</td>
<td style="text-align:right;">
-.23
</td>
<td style="text-align:right;">
.45
</td>
<td style="text-align:right;">
.28
</td>
<td style="text-align:right;">
.30
</td>
<td style="text-align:right;">
.31
</td>
<td style="text-align:right;">
.25
</td>
<td style="text-align:right;">
.36
</td>
<td style="text-align:right;">
.11
</td>
<td style="text-align:right;">
.25
</td>
<td style="text-align:right;">
.15
</td>
<td style="text-align:right;">
.29
</td>
<td style="text-align:right;">
.32
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
.31
</td>
</tr>
<tr>
<td style="text-align:left;">
esparcimiento
</td>
<td style="text-align:right;">
-.13
</td>
<td style="text-align:right;">
.04
</td>
<td style="text-align:right;">
.11
</td>
<td style="text-align:right;">
.41
</td>
<td style="text-align:right;">
.36
</td>
<td style="text-align:right;">
.32
</td>
<td style="text-align:right;">
.24
</td>
<td style="text-align:right;">
.14
</td>
<td style="text-align:right;">
.34
</td>
<td style="text-align:right;">
.20
</td>
<td style="text-align:right;">
.37
</td>
<td style="text-align:right;">
.33
</td>
<td style="text-align:right;">
.21
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><a href="https://briatte.github.io/ggcorr/">ggcorr::correlation matrixes with ggplot2</a></li>
</ul>
</div>
<div id="regresión" class="section level3" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Regresión</h3>
<ul>
<li>Con ggplot podemos añadir de manera rápida una recta de regresión a nuestros datos; véase como se hace uso de la base de datos de las olimpiadas y de la función <code>ggplot::geom_smooth()</code> para agregar una capa con la recta de regresión.</li>
</ul>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="regresión-lineal-simple.html#cb55-1" aria-hidden="true" tabindex="-1"></a>olympics <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;athlete_events.csv&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">distinct</span>()</span>
<span id="cb55-2"><a href="regresión-lineal-simple.html#cb55-2" aria-hidden="true" tabindex="-1"></a>olympics <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Medal) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(Age)) <span class="sc">%&gt;%</span> </span>
<span id="cb55-3"><a href="regresión-lineal-simple.html#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(Year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1994</span>, <span class="dv">1998</span>, <span class="dv">2002</span>, <span class="dv">2006</span>, <span class="dv">2010</span>, <span class="dv">2014</span>))) <span class="sc">%&gt;%</span> <span class="co">#Eliminamos algunos valores inluyentes</span></span>
<span id="cb55-4"><a href="regresión-lineal-simple.html#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span></span>
<span id="cb55-5"><a href="regresión-lineal-simple.html#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(Medal) <span class="sc">%&gt;%</span> </span>
<span id="cb55-6"><a href="regresión-lineal-simple.html#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> n)) <span class="sc">+</span> </span>
<span id="cb55-7"><a href="regresión-lineal-simple.html#cb55-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb55-8"><a href="regresión-lineal-simple.html#cb55-8" aria-hidden="true" tabindex="-1"></a>  general_theme <span class="sc">+</span> </span>
<span id="cb55-9"><a href="regresión-lineal-simple.html#cb55-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">formula =</span> y<span class="sc">~</span>x, <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb55-10"><a href="regresión-lineal-simple.html#cb55-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Año&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Cantidad de medallas&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-53-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="tidymodelsbroom" class="section level3" number="5.3.3">
<h3><span class="header-section-number">5.3.3</span> TidyModels::Broom</h3>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="regresión-lineal-simple.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb56-2"><a href="regresión-lineal-simple.html#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glance</span>(car_regression)</span></code></pre></div>
<pre><code># A tibble: 1 × 12
  r.squared adj.r.squared sigma statistic  p.value    df logLik   AIC   BIC
      &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1     0.651         0.644  15.4      89.6 1.49e-12     1  -207.  419.  425.
# … with 3 more variables: deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="regresión-lineal-simple.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(car_regression)</span></code></pre></div>
<pre><code># A tibble: 2 × 5
  term        estimate std.error statistic  p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)   -17.6      6.76      -2.60 1.23e- 2
2 speed           3.93     0.416      9.46 1.49e-12</code></pre>
</div>
</div>
<div id="ejemplo" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Ejemplo</h2>
<p>Consideremos la base de datos de la encuesta ingreso-gasto del 2018 en Aguascalientes.</p>
<style type="text/css">
.main-container {
    max-width: 300px !important;
}
</style>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="regresión-lineal-simple.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb60-2"><a href="regresión-lineal-simple.html#cb60-2" aria-hidden="true" tabindex="-1"></a>fancy_summary <span class="ot">&lt;-</span> <span class="fu">skim_with</span>(</span>
<span id="cb60-3"><a href="regresión-lineal-simple.html#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">numeric =</span> <span class="fu">sfl</span>(</span>
<span id="cb60-4"><a href="regresión-lineal-simple.html#cb60-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Min =</span> min,</span>
<span id="cb60-5"><a href="regresión-lineal-simple.html#cb60-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Max =</span> max,</span>
<span id="cb60-6"><a href="regresión-lineal-simple.html#cb60-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Q1 = ~ quantile(., probs = .25),</span></span>
<span id="cb60-7"><a href="regresión-lineal-simple.html#cb60-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Median =</span> <span class="sc">~</span><span class="fu">quantile</span>(., <span class="at">probs =</span> .<span class="dv">50</span>),</span>
<span id="cb60-8"><a href="regresión-lineal-simple.html#cb60-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Q3 = ~ quantile(., probs = .75),</span></span>
<span id="cb60-9"><a href="regresión-lineal-simple.html#cb60-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">Mean =</span> mean,</span>
<span id="cb60-10"><a href="regresión-lineal-simple.html#cb60-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">Sd =</span> sd,</span>
<span id="cb60-11"><a href="regresión-lineal-simple.html#cb60-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">hist =</span> <span class="sc">~</span> <span class="fu">inline_hist</span>(., <span class="dv">5</span>)</span>
<span id="cb60-12"><a href="regresión-lineal-simple.html#cb60-12" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb60-13"><a href="regresión-lineal-simple.html#cb60-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">append =</span> <span class="cn">FALSE</span></span>
<span id="cb60-14"><a href="regresión-lineal-simple.html#cb60-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb60-15"><a href="regresión-lineal-simple.html#cb60-15" aria-hidden="true" tabindex="-1"></a><span class="fu">fancy_summary</span>(data_income)</span></code></pre></div>
<table style="width: auto;" class="table table-condensed">
<caption>
<span id="tab:unnamed-chunk-56">Table 5.1: </span>Data summary
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
data_income
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of rows
</td>
<td style="text-align:left;">
2306
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of columns
</td>
<td style="text-align:left;">
14
</td>
</tr>
<tr>
<td style="text-align:left;">
_______________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Column type frequency:
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
14
</td>
</tr>
<tr>
<td style="text-align:left;">
________________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Group variables
</td>
<td style="text-align:left;">
None
</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
Min
</th>
<th style="text-align:right;">
Max
</th>
<th style="text-align:right;">
Median
</th>
<th style="text-align:right;">
Mean
</th>
<th style="text-align:right;">
Sd
</th>
<th style="text-align:left;">
hist
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
edad_jefe
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
16.00
</td>
<td style="text-align:right;">
96.00
</td>
<td style="text-align:right;">
47.00
</td>
<td style="text-align:right;">
48.65
</td>
<td style="text-align:right;">
15.63
</td>
<td style="text-align:left;">
▃▇▆▃▁
</td>
</tr>
<tr>
<td style="text-align:left;">
tot_integ
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
16.00
</td>
<td style="text-align:right;">
4.00
</td>
<td style="text-align:right;">
3.91
</td>
<td style="text-align:right;">
1.97
</td>
<td style="text-align:left;">
▇▃▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
percep_ing
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
12.00
</td>
<td style="text-align:right;">
2.00
</td>
<td style="text-align:right;">
2.47
</td>
<td style="text-align:right;">
1.38
</td>
<td style="text-align:left;">
▇▅▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
ing_cor
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1873.77
</td>
<td style="text-align:right;">
2310762.00
</td>
<td style="text-align:right;">
43175.40
</td>
<td style="text-align:right;">
57622.26
</td>
<td style="text-align:right;">
69677.79
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
alimentos
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
76602.70
</td>
<td style="text-align:right;">
9681.26
</td>
<td style="text-align:right;">
11298.88
</td>
<td style="text-align:right;">
7755.85
</td>
<td style="text-align:left;">
▇▂▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
vestido
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
26421.70
</td>
<td style="text-align:right;">
332.60
</td>
<td style="text-align:right;">
1044.05
</td>
<td style="text-align:right;">
2026.59
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
calzado
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
11739.12
</td>
<td style="text-align:right;">
273.91
</td>
<td style="text-align:right;">
681.48
</td>
<td style="text-align:right;">
1115.71
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
vivienda
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
70664.50
</td>
<td style="text-align:right;">
1759.72
</td>
<td style="text-align:right;">
2661.50
</td>
<td style="text-align:right;">
3317.12
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
limpieza
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
40309.56
</td>
<td style="text-align:right;">
1277.64
</td>
<td style="text-align:right;">
2196.77
</td>
<td style="text-align:right;">
2874.19
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
salud
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
184800.25
</td>
<td style="text-align:right;">
63.58
</td>
<td style="text-align:right;">
1257.52
</td>
<td style="text-align:right;">
6207.59
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
transporte
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
353941.46
</td>
<td style="text-align:right;">
4447.32
</td>
<td style="text-align:right;">
7505.52
</td>
<td style="text-align:right;">
12313.27
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
personales
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
113246.10
</td>
<td style="text-align:right;">
1749.66
</td>
<td style="text-align:right;">
2787.67
</td>
<td style="text-align:right;">
4087.78
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
educacion
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
160801.44
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
2788.35
</td>
<td style="text-align:right;">
6848.96
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
esparcimiento
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
40726.22
</td>
<td style="text-align:right;">
170.43
</td>
<td style="text-align:right;">
1074.29
</td>
<td style="text-align:right;">
2473.48
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
</tbody>
</table>
<p>Aquí consideramos un modelo lineal por cada variable y mostramos el resultado de la regresión entre el ingreso y la edad del jefe de familia.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="regresión-lineal-simple.html#cb61-1" aria-hidden="true" tabindex="-1"></a>all_linear_models <span class="ot">&lt;-</span> data_income <span class="sc">%&gt;%</span> </span>
<span id="cb61-2"><a href="regresión-lineal-simple.html#cb61-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>ing_cor)  <span class="sc">%&gt;%</span> <span class="fu">map</span>(<span class="sc">~</span><span class="fu">summary</span>(<span class="fu">lm</span>(data_income<span class="sc">$</span>ing_cor<span class="sc">~</span>.x)))</span>
<span id="cb61-3"><a href="regresión-lineal-simple.html#cb61-3" aria-hidden="true" tabindex="-1"></a>all_linear_models<span class="sc">$</span>edad_jefe</span></code></pre></div>
<pre><code>
Call:
lm(formula = data_income$ing_cor ~ .x)

Residuals:
    Min      1Q  Median      3Q     Max 
 -56861  -30361  -14048    9919 2253282 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 53422.63    4745.03   11.26   &lt;2e-16 ***
.x             86.33      92.86    0.93    0.353    
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 69680 on 2304 degrees of freedom
Multiple R-squared:  0.0003749, Adjusted R-squared:  -5.895e-05 
F-statistic: 0.8641 on 1 and 2304 DF,  p-value: 0.3527</code></pre>
<p>Para comparar los distintos modelos, podemos hacerlo bajo diferentes criterios; por ejemplo con el <span class="math inline">\(R^2\)</span></p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="regresión-lineal-simple.html#cb63-1" aria-hidden="true" tabindex="-1"></a>all_linear_models <span class="sc">%&gt;%</span> <span class="fu">map_df</span>(<span class="sc">~</span><span class="st">`</span><span class="at">[[</span><span class="st">`</span>(.x, <span class="st">&quot;r.squared&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb63-2"><a href="regresión-lineal-simple.html#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="st">&quot;Variable predictora&quot;</span>, <span class="st">&quot;r&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">13</span>) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(r))</span></code></pre></div>
<pre><code># A tibble: 13 × 2
   `Variable predictora`        r
   &lt;chr&gt;                    &lt;dbl&gt;
 1 vestido               0.177   
 2 limpieza              0.168   
 3 alimentos             0.140   
 4 esparcimiento         0.135   
 5 personales            0.109   
 6 calzado               0.0806  
 7 transporte            0.0804  
 8 educacion             0.0474  
 9 vivienda              0.0329  
10 percep_ing            0.0316  
11 salud                 0.0175  
12 tot_integ             0.0139  
13 edad_jefe             0.000375</code></pre>
<p>O por el p-value de la variable independiente</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="regresión-lineal-simple.html#cb65-1" aria-hidden="true" tabindex="-1"></a>all_linear_models_tidy <span class="ot">&lt;-</span> data_income <span class="sc">%&gt;%</span> </span>
<span id="cb65-2"><a href="regresión-lineal-simple.html#cb65-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>ing_cor) <span class="sc">%&gt;%</span> <span class="fu">map</span>(<span class="sc">~</span><span class="fu">tidy</span>(<span class="fu">lm</span>(data_income<span class="sc">$</span>ing_cor<span class="sc">~</span>.x)))</span>
<span id="cb65-3"><a href="regresión-lineal-simple.html#cb65-3" aria-hidden="true" tabindex="-1"></a>all_linear_models_tidy <span class="sc">%&gt;%</span> <span class="fu">map_df</span>(<span class="sc">~</span>.x[<span class="dv">2</span>,<span class="st">&quot;p.value&quot;</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb65-4"><a href="regresión-lineal-simple.html#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">&quot;Variable predictora&quot;</span> <span class="ot">=</span> <span class="fu">names</span>(all_linear_models_tidy)) <span class="sc">%&gt;%</span> </span>
<span id="cb65-5"><a href="regresión-lineal-simple.html#cb65-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="st">&quot;Variable predictora&quot;</span>, <span class="st">&quot;p.value&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(p.value)</span></code></pre></div>
<pre><code># A tibble: 13 × 2
   `Variable predictora`  p.value
   &lt;chr&gt;                    &lt;dbl&gt;
 1 vestido               2.72e-99
 2 limpieza              7.31e-94
 3 alimentos             1.50e-77
 4 esparcimiento         1.17e-74
 5 personales            6.35e-60
 6 calzado               5.36e-44
 7 transporte            7.09e-44
 8 educacion             4.03e-26
 9 vivienda              1.66e-18
10 percep_ing            7.67e-18
11 salud                 1.87e-10
12 tot_integ             1.37e- 8
13 edad_jefe             3.53e- 1</code></pre>
<p>…
…</p>
<p>Finalmente, aquí se dejan más enlaces útiles</p>
<ul>
<li><a href="https://priceonomics.com/the-discovery-of-statistical-regression/">The Discovery of Statistical Regression</a></li>
<li><a href="https://paternogbc.shinyapps.io/SS_regression/">Shiny: Sum of Squares</a></li>
<li><a href="https://setosa.io/ev/ordinary-least-squares-regression/">Ordinary Least Squares Regression</a></li>
<li><a href="https://www.jotdown.es/2016/06/correlacion-no-implica-causalidad/">Correlación no implica causalidad</a></li>
<li><a href="https://datatricks.co.uk/how-to-apply-and-interpret-linear-regression-in-r">How to apply and interpret linear regression in R</a></li>
</ul>
</div>
<div id="otros-puntos-importantes" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> Otros puntos importantes</h2>
<p>Hasta este momento sólo se ha construido un modelo de manera sencilla sin haber considerado factores importantes como la validación de supuestos (lo cual determinará si nuestro modelo tiene veracidad o no), el uso de otro tipo de transformaciones, la comparación de modelos, etc. Todo lo antes mencionado se verá en la regresión múltiple ya que es completamente equivante el enfoque.</p>
<!-- ### $r^2$ vs $R^2$ -->
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="pruebas-de-bondad-y-ajuste.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="regresión-lineal-múltiple.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "github", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
